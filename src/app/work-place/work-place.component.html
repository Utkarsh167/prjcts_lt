<!-- 
<div *ngFor="let hero of heroes"> -->

<div class="container">
  <div class="row">
    <div class="col-2 border-right">

<!-- <h2>My Surveys</h2>
<ul class="heroes">
  <li *ngFor="let survey of allSurveyData"
    [class.selected]="survey === selectedsurvey"
    (click)="onSelect(survey)">
    <span class="badge">{{survey.survey_id}}</span> {{survey.survey_name}}
  </li>
</ul>

<div *ngFor="let survey of allSurveyData">
<div *ngIf="survey===selectedsurvey">

  <h2>{{selectedsurvey.survey_name | uppercase}} Details</h2>
  <div><span>id: </span>{{selectedsurvey.survey_id}}</div>
  <div>
    <label>name:
      <input [(ngModel)]="selectedsurvey.survey_name" placeholder="name"/>
    </label>
  </div>

  </div>

</div> -->

<!-- A vertical navbar -->

<nav class="navbar ">
  <!-- Links -->

  
    <input class="form-control" type="text" placeholder="Search">

    <h5 class="header-pretitle" style="margin-top: 5px;">Workplaces
     <i class="fe fe-plus-circle" data-toggle="modal" data-target="#add_new_workplace" (click)="openModal('custom-modal-1')" title="Add New Workplace"> </i></h5>

  <ul class="navbar-nav">
     <li class="nav-item dropdown" *ngFor="let workplaces of allWorkplaceLocationData">
      <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
        {{workplaces.workplace_name}}
      </a>
      <div class="dropdown-menu myclass" >
        <a class="dropdown-item" (click)="getSurveyUnderLocationData(locations.location_id)" *ngFor="let locations of workplaces.locations">{{locations.location_name}}</a>
        <a class="dropdown-item" (click)="openModalForAddNewLocation('add-new-location',workplaces.workplace_id)" title="Add New Location">Add New</a>
      </div>
    </li>



   <!--  <li class="nav-item" *ngFor="let workplaces of allWorkplaceLocationData">
      <a class="nav-link" href="#"></a>
    </li> -->
   <!--  <li class="nav-item">
      <a class="nav-link" href="#">Link 2</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#">Link 3</a>
    </li>
    <li class="nav-item dropdown" *ngFor="let workplaces of allWorkplaceLocationData">
      <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
        DropDown Link
      </a>
      <div class="dropdown-menu myclass">
        <a class="dropdown-item" href="#">Link 1</a>
        <a class="dropdown-item" href="#">Link 2</a>
        <a class="dropdown-item" href="#">Link 3</a>
      </div>
    </li> -->
  </ul>

</nav>
      </div>
      <div class="col-10" >

         <!--  if there is no survey data -->

         <div *ngIf="location_id" class="row" >
            <div class="col-3 text-center grid-margin stretch-card" style="margin-top:40px; margin-left: 30px">
                <img src="assets/img/add_icon.png" (click)="openAddSurveyModel()" alt="add icon" height="50" width="50">
                 <br/><label (click)="openAddSurveyModel()">Create a Survey</label>
                  </div>

                  <div class="col-md-4" *ngFor="let survey of allSurveyData" >
                    <mat-card style="margin-top: 20px;">
                      <div class="card">
                      <div class="card-header">
                        <h4 (click)="openSurveyDashboard(survey.survey_id)" class="card-title">{{survey.survey_name}}</h4>
                      </div>
                      <div class="card-body">
                        <p>No. of responses : {{survey.response_count}}</p>
                        <p>Status : {{survey.status}}</p>
                      </div>
              
                      <div class="card-footer">
              <div class="row">
                <div class="col">
                  Devices : {{survey.no_of_devices}}
                </div>
                <div class="col text-right dropdown">
                      <i class="fe fe-more-vertical"  data-toggle="dropdown">
                       <span class="caret"></span></i>
                <ul class="dropdown-menu">
                  <li><a (click)="editSurvey(survey.survey_id)" class="dropdown-item">Edit</a></li>
                  <li><a class="dropdown-item" href="#">CSS</a></li>
                  <li><a class="dropdown-item" href="#">JavaScript</a></li>
                </ul>  
                </div>
              </div>
                </div>
                    </div>
                    </mat-card>
                  </div>
                  
                <!-- <div class="col-7 grid-margin stretch-card" style="margin-top:50px" >
                  <p>
                      Illustraon to be posted here, following the same  color codes
                  </p>

                  <h2>Looks like you have just  started</h2>
                  <p>
                      Create your ﬁrst survey to start collecng data and measuring  experience. This page helps you manage all your surveys, workplaces,  locaon and devices.
                  </p>
                </div> -->
         </div>


         <div *ngIf="surveySize==0 && !location_id">
          <div class="col-12 grid-margin stretch-card" style="margin-top:50px" >
            <p>
                No survey available
            </p>
            <h2>Please select a location then add survey</h2>
          </div>
         </div>
        




        <div *ngIf="!location_id"  class="row">
         <div class="col-md-4" *ngFor="let survey of allSurveyData" >
      <mat-card style="margin-top: 20px;">
        <div class="card">
        <div class="card-header">
          <h4 (click)="openSurveyDashboard(survey.survey_id)" class="card-title">{{survey.survey_name}}</h4>
        </div>
        <div class="card-body">
          <p>No. of responses : {{survey.response_count}}</p>
          <p>Status : {{survey.status}}</p>
        </div>

        <div class="card-footer">
<div class="row">
  <div class="col">
    Devices : {{survey.no_of_devices}}
  </div>
  <div class="col text-right dropdown">
        <i class="fe fe-more-vertical"  data-toggle="dropdown">
         <span class="caret"></span></i>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="#">HTML</a></li>
    <li><a class="dropdown-item" href="#">CSS</a></li>
    <li><a class="dropdown-item" href="#">JavaScript</a></li>
  </ul>  
  </div>
</div>
  </div>
      </div>
      </mat-card>
    </div>
    </div>


</div>

</div>



<jw-modal id="custom-modal-1">
    <div class="modal" style="display: block;">
        <div class="modal-dialog modal-confirm">
<div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="ModalLabel">Add New Workplace</h5><h5>
            <button type="button" class="close" (click)="closeModal('custom-modal-1');" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </h5></div>
          <form action="add_workplace" [formGroup]="add_workplace" (ngSubmit)="onSubmitWp()" method="POST">
            <div class="modal-body">   
              <div class="form-group">
                <input type="text" id="workplace_name" formControlName="wp_name" class="form-control" name="name" placeholder="Give it a name">
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-light" (click)="closeModal('custom-modal-1');" data-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-success">Create workplace</button>
              
            </div>
          </form>
      </div>
      </div>
      </div>
</jw-modal>



<jw-modal id="add-new-location">
    <div class="modal" style="display: block;">
        <div class="modal-dialog modal-confirm">
  <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="ModalLabel">Add New location</h5><h5>
                    <button type="button" class="close" data-dismiss="modal" (click)="closeModal('add-new-location');" aria-label="Close">
                      <span aria-hidden="true">×</span>
                    </button>
                </h5></div>
                <form action="add_location" [formGroup]="add_location" (ngSubmit)="onSubmitLocationUnderWp(modalWorkplaceId)" method="POST">
                  <div class="modal-body">   
                    <div class="form-group">
                      <input type="text" id="location_name" formControlName="location_name" class="form-control" name="location_name" placeholder="Give it a name">
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-light" (click)="closeModal('add-new-location')" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Add Location</button>
                  </div>
                </form>
              </div>
              </div>
              </div>
</jw-modal>

<!-- <app-survey-dashboard></app-survey-dashboard>
 --><!-- <jw-modal id="custom-modal-1">
    <h1>A Custom Modal!</h1>
    <p>Home page text: <input type="text" [(ngModel)]="bodyText" /></p>
    <button (click)="closeModal('custom-modal-1');">Close</button>
</jw-modal> -->


<jw-modal id="add-new-survey">
    <div class="modal" style="display: block;">
        <div class="modal-dialog modal-confirm">
  <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="ModalLabel">Add New Survey</h5><h5>
                    <button type="button" class="close" data-dismiss="modal" (click)="closeModal('add-new-survey');" aria-label="Close">
                      <span aria-hidden="true">×</span>
                    </button>
                </h5></div>
                <form action="add_survey" [formGroup]="add_survey" (ngSubmit)="onSubmitAddSurvey()" method="POST">
                  <div class="modal-body">   
                    <div class="form-group">
                      <input type="text" id="survey_name" formControlName="survey_name" class="form-control" placeholder="Give it a name">
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-light" (click)="closeModal('add-new-survey')" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Add Survey</button>
                  </div>
                </form>
              </div>
              </div>
              </div>
</jw-modal>