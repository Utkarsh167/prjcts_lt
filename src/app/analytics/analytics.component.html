
<!-- <div class="container"> -->
<div style="padding-left: 50px;padding-right: 50px;margin-bottom: 20px;">

      <ngx-loading *ngIf="loading" [show]="loading" [config]="{ backdropBorderRadius: '3px' }" ></ngx-loading>

      <div *ngIf="!loading">
    <!-- <mat-spinner class="loader" diameter="20"></mat-spinner> -->
  <div class="header">
          <div class="header-body">
            <div class="row align-items-end">
              
                <div class="col-auto">
                  <div class="btn-group dropdown">

              <select class="form-control" (change)="selectLocationOption(selectedLocId)" [(ngModel)]="selectedLocId" aria-labelledby="dropdownMenuDate" data-x-placement="bottom-end" >
                  <option [ngValue]="'0'" >Select Location</option>
                <option *ngFor ="let location of locationList" [ngValue]="location.id">
                        {{location.name}}</option>
                </select>
                      </div>
                </div>

                <div class="col-auto">
                  <div class="btn-group dropdown">

                          <select class="form-control" (change)="selectSurveyOption(selectedSurveyId)" [(ngModel)]="selectedSurveyId" aria-labelledby="dropdownMenuDate" data-x-placement="bottom-end" id="select_campaign" >
                  <option  [ngValue]="'0'" >Select Survey</option>
                <option *ngFor ="let survey of surveyList" [ngValue]="survey.survey_id">
                        {{survey.survey_name}}</option>
                </select>
                      </div>
                </div>

                <div class="col-auto">
                  <div class="btn-group dropdown">

                         <select class="form-control" (change)="selectAreaOption(selectedArea)" [(ngModel)]="selectedArea" aria-labelledby="dropdownMenuDate" data-x-placement="bottom-end" id="select_campaign" >
                  <option [ngValue]="'0'"  >Select Area</option>
                <option *ngFor ="let area of areaList" [ngValue]="area.tablet_id" >
                     <!-- <div *ngFor="let key of area | keyvalue"> -->
                        {{area.area_name}}
                     <!-- </div>    -->
                </option>
                </select>
                      </div>
                </div>

              


                
              


                <div class="col-auto justify-content-end d-flex text-right">
                    <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                              <i class="fa fa-calendar" aria-hidden="true"></i>
                              <!-- <mat-icon>calendar_today</mat-icon> -->
                            </span>
                        </div>
                  <input type="text"
                    ngxDaterangepickerMd
                    [(ngModel)]="selected"
                    [showCustomRangeLabel]="true"
                    [alwaysShowCalendars]="alwaysShowCalendars"
                    [ranges]="ranges"
                    [showClearButton]="false"
                    [showCancel]="true"
                    [linkedCalendars]="true"
                    (rangeClicked)="rangeClicked($event)"
                    (datesUpdated)="datesUpdated($event)"
                    [keepCalendarOpeningWithRange]="keepCalendarOpeningWithRange"
                    [showRangeLabelOnInput]="showRangeLabelOnInput"
                    class="form-control"
                    placeholder="Select please..."/> 
                    </div>
                    <!-- <i class="fa fa-caret-down"></i> -->
                </div>
               
                <div class="col text-right">
                    <button class="btn" style="background: #0078D4;color: #fff;" (click)="pdf.saveAs('invoice.pdf')"> {{!pdf_down?'Download PDF':'Downloading...'}}</button>
                      </div>

              </div>
             <hr>

             <!-- <kendo-numerictextbox #scaleInput [(ngModel)]="scale"
             [min]="0.1" [max]="5" [step]="0.1" format="N1"></kendo-numerictextbox> -->
             <kendo-pdf-export #pdf paperSize="A4" margin="2cm" [scale]="scale" forcePageBreak=".page-break" [repeatHeaders]="repeatHeaders">

              <div id="contentToConvert" class="tab-content tab-transparent-content pb-0">
                <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">

                   <div class="row">
                    <div class="col-lg-12 grid-margin stretch-card">
                      <mat-card>
                        <div class="card-body">
                            <mat-card-content>
                                <div class="d-flex flex-wrap justify-content-between">
                                    <div>
                                      <h4 class="card-title mb-3">Total Responses</h4>
                                    </div>
                                    <div>
                                      <div class="d-flex align-items-center">
    
                                        
                                        <div class="dropdown mr-2 mb-2 d-none d-md-block">
                                          <!--<button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuSizeButton4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                          Filter
                                          </button> -->
                                          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuSizeButton4" data-x-placement="bottom-end">
                                            <!--<a class="dropdown-item"  id="today">Today</a> -->
                                            <a class="dropdown-item" id="seven_days_analytics">7 Days</a>
                                            <a class="dropdown-item" id="two_weeks">2 Weeks</a>
                                            <a class="dropdown-item" id="this_week">1 Month</a>
                                            <a class="dropdown-item" id="3_months_rating_analytics">3 Months</a>
                                          </div>
                                        </div>
    
                                      </div>
                                    </div>
                                  </div>
                              <div class=" text-center" style="margin-top: 10px">
                               <div style="display: block;">
                          <canvas id="linebarchart" baseChart 
                            [datasets]="barChartData"
                            [labels]="barChartLabels"
                            [options]="barChartOptions"
                            [plugins]="barChartPlugins"
                            [legend]="barChartLegend"
                            [chartType]="barChartTypeTotalResponses">
                          </canvas>
                        </div>
                              </div>


                              </mat-card-content>
                        </div>
                      </mat-card>
                    </div>
                  </div>




                  <div class="row">
                          <div class="col-12 col-lg-12 col-xl-12 grid-margin stretch-card">
                              <mat-card>
                                <div class="card-body">
                                    <div>
                                      <h4 class="card-title mb-3">Score Distribution</h4>
                                    </div>
                                  <div class="pt-2 pb-2 mt-4 mb-3 border-radius-widget">
                                    
                                    <div class="row">
                                      <div class="col-4">
                                        <div *ngIf="totalRating!=0" style="display: block;">
                                            <canvas id="canvasPie" baseChart 
                                              [data]="pieChartData"                                                  
                                              [labels]="pieChartLabels" 
                                              [chartType]="pieChartType"
                                              [colors]="doughnutColors"
                                              [options]="pieChartOptions"
                                              [plugins]="pieChartPlugins"
                                              [legend]="pieChartLegend">
                                            </canvas>
                                          </div>
                                          <p style="font-size: 14px; color: darkgray; margin-left: 105px;margin-top: 10px;">Total Responses : {{anaData.totalRating}}</p>
                                      </div>

                                      <div class="col-8 d-flex justify-content-center text-center" style="margin-top: 30px">
                                     <ul class="d-md-flex flex-wrap align-items-baseline justify-content-center list-unstyled text-center mb-0 sales-legend">
                                      <li class="border-right-sm" style="padding:.5rem 1.0rem">
                                        <h6 class="font-weight-normal" style="font-size: 14px !important" id="five_star_rating_average">{{fiveStarPer}}% feel like</h6>
                                       
                                          <img src="assets/img/smileys/group1_50x50.png">
                                          <!--<p class="text-primary pl-md-4 pr-md-4">5 <i class="fe fe-star"></i></p>-->
                                        <p  style="font-size: 16px;" id="five_star_rating">Responses: {{fiveStarValue}}</p>
                                                          
                                      </li>

                                       <li class="border-right-sm" style="padding:.5rem 1.0rem">
                                        <h6 class="font-weight-normal" style="font-size: 14px !important" id="four_star_rating_average">{{fourStarPer}}% feel like</h6>
                                        
                                         <img src="assets/img/smileys/group2_50x50.png">
                                        
                               <!--
                                        <p class="text-primary pl-md-4 pr-md-4">4 <i class="fe fe-star"></i></p>-->
                                        <p  style="font-size: 16px;" id="four_star_rating">Responses: {{fourStarValue}}</p>
                                      </li>

                                       <li class="border-right-sm" style="padding:.5rem 1.0rem">
                                        <h6 class="font-weight-normal" style="font-size: 14px !important" id="three_star_rating_average">{{threeStarPer}}% feel like</h6>
                                       
                                        <img src="assets/img/smileys/group3_50x50.png">
                                       

                                       <!-- <p class="text-primary pl-md-4 pr-md-4">3 <i class="fe fe-star"></i></p> -->
                                        <p  style="font-size: 16px;"  id="three_star_rating">Responses: {{threeStarValue}}</p>
                                      </li>

                                       <li class="border-right-sm" style="padding:.5rem 1.0rem">
                                        <h6 class="font-weight-normal" style="font-size: 14px !important" id="two_star_rating_average">{{twoStarPer}}% feel like</h6>
                                        
                                        <img src="assets/img/smileys/group4_50x50.png">
                                      

                                        <!--<p class="text-primary pl-md-4 pr-md-4">2 <i class="fe fe-star"></i></p>-->
                                        <p  style="font-size: 16px;" id="two_star_rating">Responses: {{twoStarValue}}</p>
                                      </li>
                                                                       
                                      <li class="border-right-sm" style="padding:.5rem 1.0rem">
                                        <h6 class="font-weight-normal" style="font-size: 14px !important" id="One_star_rating_average">{{oneStarPer}}% feel like</h6>

                                        <img src="assets/img/smileys/group5_50x50.png">
                                        <!--<p class="text-primary">1 <i class="fe fe-star"></i></p>-->
                                        <p style="font-size: 16px;" id="One_star_rating">Responses: {{oneStarValue}}</p>
                                      </li>
                                    </ul>
                                </div>
                                  </div>
                                </div>
                              </div>
                            </mat-card>
                      </div>
                    </div>


                    
                  <div class="row">
                    <div class="col-lg-4">
                      <mat-card>
                        <div class="card-body">
                          <h4 class="card-title">Happiness Score</h4>
                           <div class="text-center">
                        <ngx-gauge  [type]="gaugeType" 
                      [value]="gaugePositiveValue" 
                      [foregroundColor]="excellentColor"
                      [duration]=2
                      [thick]="guageThickness"
                      [size]="guageSize">
                      <ngx-gauge-value>
                        {{ gaugePositiveValue | number:'1.0-0'}}
                    </ngx-gauge-value>
                    </ngx-gauge>
                    <!-- <mwl-gauge id="positiveGuage"
                    [max]="100"
                    [dialStartAngle]="-90"
                    [dialEndAngle]="-90.001"
                    [value]="gaugePositiveValue"
                    [animated]="true"
                    
                    [animationDuration]="1">
                  </mwl-gauge> -->
                      </div>
                      <div style="color:darkgray;font-size:14px">{{'Responses : '+(fiveStarValue+fourStarValue)}}</div>
                           </div>
                        
                          </mat-card>
                    </div>
                    <div class="col-lg-4">
                      <mat-card>
                        <div class="card-body">
                          <h4 class="card-title">Neutral Index</h4>
                          <div class="text-center">
                        <ngx-gauge  [type]="gaugeType" 
                      [value]="gaugeNeutralValue" 
                      [duration]=2
                      [thick]="guageThickness"
                      [foregroundColor]="neutralColor"
                      [size]="guageSize"> 
                      <ngx-gauge-value>
                        {{ gaugeNeutralValue | number:'1.0-0'}}
                    </ngx-gauge-value>
                    </ngx-gauge>
                   

                      <!-- <mwl-gauge
                      id="neutralGuage"
                      [max]="100"
                      [dialStartAngle]="-90"
                      [dialEndAngle]="-90.001"
                      [value]="gaugeNeutralValue"
                      [animated]="true"
                      [animationDuration]="1">
                    </mwl-gauge> -->
                      </div>
                      <div style="color:darkgray;font-size:14px">{{'Responses : '+(threeStarValue)}}</div>

                        </div>
                        
                      </mat-card>
                    </div>
                    <div class="col-lg-4">
                      <mat-card>
                        <div class="card-body">
                          <h4 class="card-title">Negative Index</h4>
                           <div class="text-center">
                        <ngx-gauge  [type]="gaugeType" 
                      [duration]=2
                      [value]="gaugeNegativeValue" 
                      [foregroundColor]="negativeColor"
                      [thick]="guageThickness"
                      [size]="guageSize">
                      <ngx-gauge-value>
                        {{ gaugeNegativeValue | number:'1.0-0'}}
                    </ngx-gauge-value>
                    </ngx-gauge>
                    <!-- <mwl-gauge
                    id="negativeGuage"
                    [max]="100"
                    [dialStartAngle]="-90"
                    [dialEndAngle]="-90.001"
                    [value]="gaugeNegativeValue"
                    [animated]="true"
                    [animationDuration]="1">
                  </mwl-gauge> -->
                      </div>
                      <div style="color:darkgray;font-size:14px">{{'Responses : '+(twoStarValue+oneStarValue)}}</div>

                        </div>

                        
                      </mat-card>
                    </div>
                  </div>

        <div class="row">
  
                    <div class="col-sm-6 grid-margin stretch-card">
                      <mat-card>
                        <div class="card-body">
                          <h4 class="card-title">Satisfaction Points</h4>
                           <div class="text-center">
                   <canvas baseChart 
                     [datasets]="barChartSatisfactionData"
                     [labels]="barChartSatisfactionLabels"
                     [options]="barChartSatisfactionOptions"
                     [plugins]="barChartPlugins"
                     [legend]="barChartLegend"
                     [chartType]="barChartType">
                   </canvas>
                   </div>
                 </div>
                      </mat-card>
                    </div>

                    <div class="col-sm-6 grid-margin stretch-card">
                      <mat-card>
                        <div class="card-body">
                          <h4 class="card-title">Neutral Points</h4>
                           <div class="text-center">
                               <canvas baseChart 
                          [datasets]="barChartNeutralData"
                          [labels]="barChartNeutralLabels"
                          [options]="barChartNeutralOptions"
                          [plugins]="barChartPlugins"
                          [legend]="barChartLegend"
                          [chartType]="barChartType">
                        </canvas>
                        </div>
                        </div>
                      </mat-card>
                    </div>
                     
                  </div>

                  <div class="row">
  
                    <div class="col-sm-6 grid-margin stretch-card">
                      <mat-card>
                          <div class="card-body">
                              <h4 class="card-title">Pain Points</h4>
                               <div class="text-center">
                   <canvas baseChart 
                     [datasets]="barChartPainData"
                     [labels]="barChartPainLabels"
                     [options]="barChartPainOptions"
                     [plugins]="barChartPlugins"
                     [legend]="barChartLegend"
                     [chartType]="barChartType">
                   </canvas>
                   </div>
                 </div>
                      </mat-card>
                    </div>

                    <div class="col-sm-6 grid-margin stretch-card">
                      <mat-card>
                          <div class="card-body">
                              <h4 class="card-title">All Data Combined</h4>
                               <div class="text-center">
                          <canvas baseChart 
                          [datasets]="barChartAllCombData"
                          [labels]="barChartAllCombLabels"
                          [options]="barChartNeutralOptions"
                          [plugins]="barChartPlugins"
                          [legend]="barChartLegend"
                          [chartType]="barChartType">
                        </canvas>
                        </div>
                        </div>
                      </mat-card>
                    </div>
                     
                  </div>


                  <div class=" col-sm-12 grid-margin stretch-card">
                      <mat-card>
                          <div class="card-body">
                              <h4 class="card-title">Area Data</h4>
                               <div class="text-center">
                                  <canvas baseChart 
                            [datasets]="barChartAreaData"
                            [labels]="barChartAreaLabels"
                            [options]="barChartAreaOptions"
                            [plugins]="barChartPlugins"
                            [legend]="barChartLegend"
                            [chartType]="barChartType">
                          </canvas>
                          </div>
                        </div>
                      </mat-card>
                    </div>



                    <div class=" col-sm-12 grid-margin stretch-card">
                      <mat-card>
                        <div class="card-header">
                          <div class="row align-items-center">
                            <div class="col">
                              <!-- Title -->
                              <h4 class="card-header-title">Responses</h4>
                            </div>
                            
                          </div> <!-- / .row -->
                        </div>
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table table-sm card-table">
                            <thead>
                              <tr>
                                <th>Initial</th>
                                <th> Name</th>
                                <th> Comment</th>
                                <th> location</th>
                                <th>Rating</th>
                                <th>Multi Option</th>
                                <th>Time</th>
                              </tr>
                            </thead>
                            <tbody *ngFor="let responseData of responses">

                              <tr>
                                      <td>
                                      <div class="avatar avatar-sm">
                                      <span class="avatar-title rounded-circle">{{responseData.user_name.substring(0,1) | titlecase}}</span>
                                      </div>
                                      </td>
                                      <td><div class="text-dark font-weight-medium">
                                        {{responseData.user_name | titlecase}}
                                      </div></td>
                                     
                                      <td>
                                        {{responseData.comment | titlecase}}
                                      </td>
                                      <td>
                                        {{responseData.name | titlecase}}
                                      </td>
                                      <td><div class="avatar avatar-sm">
                                        <span  *ngIf="responseData.rating==1"  class="avatar-title rounded-circle" style="background-color:#EE2762; color:#fff">{{responseData.rating}}</span>
                                        <span  *ngIf="responseData.rating==2"  class="avatar-title rounded-circle" style="background-color:#F67424; color:#fff">{{responseData.rating}}</span>
                                        <span  *ngIf="responseData.rating==3"  class="avatar-title rounded-circle" style="background-color:#F4C902; color:#fff">{{responseData.rating}}</span>
                                        <span  *ngIf="responseData.rating==4"  class="avatar-title rounded-circle" style="background-color:#43C153; color:#fff">{{responseData.rating}}</span>
                                        <span  *ngIf="responseData.rating==5"  class="avatar-title rounded-circle" style="background-color:#189150; color:#fff">{{responseData.rating}}</span>
                                  </div>
                                      </td>
                                      <td>
                                        {{responseData.multi_option | titlecase}}
                                      </td>
                                      <td>
                                        {{responseData.res_created_at}}
                                      </td>
                                      </tr>

                            </tbody>
                          </table>
                        </div>
                      </div>
                    </mat-card>
                  </div>

                  <!-- <div class="row">
  
                    <div class="col-sm-12 grid-margin stretch-card">
                      <div class="container text-center" style="margin-top: 10px">
                        <div style="display: block;">
                            <h4 class="card-title">Area Wise Data</h4>
                   <canvas baseChart 
                     [datasets]="barChartAreaData"
                     [labels]="barChartAreaLabels"
                     [options]="barChartAreaOptions"
                     [plugins]="barChartPlugins"
                     [legend]="barChartLegend"
                     [chartType]="barChartType">
                   </canvas>
                 </div>
                       </div>
                    </div> 
                  </div> -->



              <!-- <fusioncharts
                [width]="width"
                [height]="height"
                [type]="type"
                [dataFormat]="dataFormat"
                [dataSource]="dataSource"
              >
              </fusioncharts> -->

                </div>
                <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                  Tab Item
                </div>
                <div class="tab-pane fade" id="returns-1" role="tabpanel" aria-labelledby="returns-tab">
                  Tab Item
                </div>
                <div class="tab-pane fade" id="more" role="tabpanel" aria-labelledby="more-tab">
                  Tab Item
                </div>
              </div>
            </kendo-pdf-export>

            </div>
          </div>
        </div>
</div>