<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" ></ngx-loading>

<div *ngIf="!loading">
<div class="container">

    <div style="margin-top: 10px" class="row align-items-end">
        <div class="col">
          <h1 class="header-title">Users List</h1>
        </div>
      <div class="col-auto">
        <div class="pr-4 pl-4 mb-3 mb-xl-0 d-xl-block d-none">
          <button class="btn btn-success"   data-toggle="modal" (click)="openModalForNewUser()" data-target="#add_new_area">Add new</button>  
          <!-- routerLink="/home/users/new-user" -->
        </div>
      </div>
      </div>

  <div style="margin-top: 20px"class="row">
    <div class="col-12">
       
       
          <mat-form-field>
              <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search">
            </mat-form-field>
            
            <div class="mat-elevation-z8" style="margin-bottom: 20px">
          
          
                <table id="contentToConvert" mat-table [dataSource]="dataSource" matSort class="table table-sm table-nowrap card-table mat-elevation-z8">

                    <!-- Position Column -->
                    <ng-container matColumnDef="position">
                      <th class="text-muted sort" *matHeaderCellDef mat-sort-header> No. </th>
                      <td *matCellDef="let element;let i=index"> {{i+1}} </td>
                    </ng-container>
                  
                    <!-- Name Column -->
                   

                    <ng-container matColumnDef="name">
                        <th class="text-muted sort" *matHeaderCellDef mat-sort-header> NAME </th>
                        <td *matCellDef="let element"> {{element.name}} </td>
                      </ng-container>
                  <!-- Weight Column -->
              <ng-container matColumnDef="client_email">
                  <th class="text-muted sort" *matHeaderCellDef mat-sort-header> ADMIN TYPE </th>
                  <td *matCellDef="let element" > {{element.client_email}} </td>
                </ng-container>
              
                <!-- Symbol Column -->
                <ng-container matColumnDef="location_name">
                  <th class="text-muted sort" *matHeaderCellDef mat-sort-header> LOCATION NAME </th>
                  <td  *matCellDef="let element"> {{element.location_name}} </td>
                </ng-container>
    
                <ng-container matColumnDef="admin_type">
                    <th class="text-muted sort" *matHeaderCellDef mat-sort-header> USER ROLE </th>
                    <td  *matCellDef="let element"> {{element.admin_type}} </td>
                  </ng-container>
    
                  <ng-container matColumnDef="created_at">
                      <th class="text-muted sort" *matHeaderCellDef mat-sort-header> Created At </th>
                      <td *matCellDef="let element"> {{element.created_at}} </td>
                    </ng-container>
              
  
                    <!-- <ng-container matColumnDef="action">
                      <th class="text-muted sort" *matHeaderCellDef mat-sort-header> ACTION </th>
                      <td *matCellDef="let element"><i class="fe fe-lock"></i> </td>
                    </ng-container> -->
        
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                  </table>
          
          
          
          
          
          
  
            <mat-paginator [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
  
          </div>
  
  
      
    </div>
  </div>
  </div>
</div>



<!-- <jw-modal id="add-new-user">
    <div class="modal" style="display: block;">
        <div class="modal-dialog modal-confirm">
            <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="ModalLabel">Add New User</h5><h5>
                      <button type="button" class="close" data-dismiss="modal" (click)="closeModal('add-new-user');" aria-label="Close">
                        <span aria-hidden="true">×</span>
                      </button>
                  </h5></div>
                  <form action="add_client" [formGroup]="add_user" (ngSubmit)="addNewUser()" method="POST">
                    <div class="modal-body">   
                      <div class="form-group">
                        <input type="text" id="client_name" formControlName="name" class="form-control" name="client_name" placeholder="Enter user name">
                        <div class="row">
                          <div class="col-6">
                             <h4 style="margin-top: 15px" >Location Name : </h4>
                            </div>

                            <div class="col-6">
                              <select class="form-control" formControlName="location_id" aria-labelledby="dropdownMenuDate" data-x-placement="bottom-end" >
                                <option [value]="0" >*Select Location</option>
                              <option *ngFor ="let location of locationList" [value]="location.id">
                                      {{location.name}}</option>
                              </select>
                            </div>

                              </div>
                        <input style="margin-top: 10px" type="text" id="client_passwd" formControlName="admin_type" class="form-control" name="client_passwd" placeholder="Enter User type">                            
                        <input style="margin-top: 10px" type="text" id="client_email" formControlName="client_email" class="form-control" name="client_email" placeholder="Enter user's email">
                        <input style="margin-top: 10px" type="text" id="client_passwd" formControlName="client_passwd" class="form-control" name="client_passwd" placeholder="Enter user's password">                            
          
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-light" (click)="closeModal('add-new-user')" data-dismiss="modal">Cancel</button>
                      <button type="submit" class="btn btn-success">Submit</button>
                    </div>
                  </form>
                </div>
                </div>
                </div>
  </jw-modal> -->


  <jw-modal id="add-new-user">
      <div style="display: block;">
          <div class="modal-dialog modal-confirm">
              <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="ModalLabel">Add New User</h5><h5>
                        <button type="button" class="close" data-dismiss="modal" (click)="closeModal('add-new-user');" aria-label="Close">
                          <span aria-hidden="true">×</span>
                        </button>
                    </h5></div>
                  <div class="thumbnail">
                    <form action="add_client" [formGroup]="add_user" (ngSubmit)="addNewUser()" method="POST">
                      <div class="modal-body">   
                              <!-- <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading> -->
                             
                             <form action="add_client" [formGroup]="add_user" method="POST">
                                   <div class="form-group">
                                     <input type="text" id="client_name" formControlName="name" class="form-control" name="client_name" placeholder="Enter user name">
                                     <div class="row" style="margin-top: 10px">
                                       <!-- <div class="col-6">
                                          <h4 style="margin-top: 15px" >Location Name : </h4>
                                         </div> -->
                             
                                         <div class="col-6">
                                           <select class="form-control" formControlName="location_id" aria-labelledby="dropdownMenuDate" data-x-placement="bottom-end" >
                                             <option [value]="0" >*Select Location</option>
                                           <option *ngFor ="let location of locationList" [value]="location.id">
                                                   {{location.name}}</option>
                                           </select>
                                         </div>
                             
                                         <div class="col-6">
                                             <select class="form-control" formControlName="admin_type" aria-labelledby="dropdownMenuDate" data-x-placement="bottom-end" >
                                                 <option [value]="0" >*Select Admin</option>
                                                 <option [value]="'super'" >Super Admin</option>
                                                 <option [value]="'admin'" >Admin</option>
                                               </select>
                                         </div>
                                         
                                           </div>
                             
                                           <div class="row">
                                             <div class="col-6">
                                                 <input style="margin-top: 10px" type="text" id="client_email" formControlName="client_email" class="form-control" name="client_email" placeholder="Enter user's email">
                             
                                             </div>
                                             <div class="col-6">
                                     <input style="margin-top: 10px" type="password" id="client_passwd" formControlName="client_passwd" class="form-control" name="client_passwd" placeholder="Enter user's password">                                              
                                               </div>
                                           </div>
                             
                             
                                   </div>
                                   <!-- <button type="button" class="btn btn-light" (click)="closeModal('add-new-user')" data-dismiss="modal">Cancel</button> -->
                                   <!-- <button type="submit" class="btn btn-success">Submit</button> -->
                               </form>
                             
                             
                               <!-- <button (click)="selectAllCheckBoxes()" >Select All</button> -->
                             
                               <h4>Check permissions that you want to assign this user.</h4>
                               <form style="margin-top: 10px" [formGroup]="checkboxForm">
                                 <div class="row">
                                   <div class="col-6" *ngFor="let modules of moduleData; let i = index">
                                       <label formArrayName="modules" >
                                           <input type="checkbox" [formControlName]="i">
                                           {{modules.module_label}}
                                         </label>
                                   </div>
                                 </div>
                                   <!-- <ng-container *ngFor="let modules of moduleData; let i = index">
                                   <p>
                             
                                         <label formArrayName="modules" >
                                                 <input type="checkbox" [formControlName]="i">
                                                 {{modules.module_label}}
                                               </label>
                                             </p>
                                   </ng-container> -->
                               
                             
                               
                                   <!-- <button type="submit" (click)="addNewUser()" class="btn btn-success">Submit</button> -->
                               </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-light" (click)="closeModal('add-new-user')" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Submit</button>
                      </div>
                    </form>
                    </div>
                  </div>
                  </div>
                  </div>
    </jw-modal>